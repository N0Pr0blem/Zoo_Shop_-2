<!DOCTYPE html>
<html lang="ru" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
            crossorigin="anonymous"
    />
    <link rel="stylesheet" type="text/css" th:href="@{/css/header.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/css/admin_style.css}"/>
</head>
<body>
<header th:insert="blocks/header :: header"></header>
<div class="container main">
    <div class="row">
        <div class="col-md-2" th:insert="blocks/admin_panel::admin_panel"> </div>
        <div class="col-md-10">
            <div class="card">
                <table>
                    <tr>
                        <th>Имя</th>
                        <th>Телефон</th>
                        <th>Почта</th>
                        <th>Роли</th>
                    </tr>
                    <tr th:each="user : ${users}">
                        <td th:text="${user.username}"></td>
                        <td th:text="${user.phoneNumber}"></td>
                        <td th:text="${user.email}"></td>
                        <td>
                            <span class="badge bg-success-subtle border border-success-subtle text-success-emphasis rounded-pill">User</span>
                            <div th:if="${#arrays.contains(user.roles, T(org.example.model.Role).ADMIN)}">
                                <span class="badge bg-danger-subtle border border-danger-subtle text-danger-emphasis rounded-pill">Admin</span>
                            </div>
                        </td>
                        <td>
                            <div th:if="${not #arrays.contains(user.roles, T(org.example.model.Role).ADMIN)}">
                                <form method="post" th:action="@{'/admin/users/'+${user.id}+'/makeAdmin'}">
                                    <button type="submit" class="btn btn-outline-info">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-plus-fill" viewBox="0 0 16 16">
                                            <path d="M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6"/>
                                            <path fill-rule="evenodd" d="M13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5"/>
                                        </svg>
                                    </button>
                                </form>
                            </div>
                            <div th:if="${#arrays.contains(user.roles, T(org.example.model.Role).ADMIN)}">
                                <form method="post" th:action="@{'/admin/users/'+${user.id}+'/makeUser'}">
                                    <button type="submit" class="btn btn-outline-danger">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-dash-fill" viewBox="0 0 16 16">
                                            <path fill-rule="evenodd" d="M11 7.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5"/>
                                            <path d="M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6"/>
                                        </svg>
                                    </button>
                                </form>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>
<footer th:insert="blocks/footer :: footer" class="text-body-secondary py-5 bg-dark"></footer>
</body>
</html>